---
title: "Sung Lee Project 1"
author: "Sung Lee"
date: "2/13/2020"
output: 
 html_document: 
  df_print: paged
---

[Project on RPubs](https://rpubs.com/logicalschema/data607_project1 "Sung's Project 1 Assignment Rpubs")
<br>
[Rmd on Github](https://github.com/logicalschema/DATA607/blob/master/Project%201/Sung%20Lee%20Project%201.Rmd "Sung's Project 1 Assignment Github")


## Introduction  
This project will read the Chess tournament text file hosted on Github at https://raw.githubusercontent.com/logicalschema/DATA607/master/Project%201/tournamentinfo.txt and will generate a CSV file. The following format will be the CSV file tjat will be exported:


Player's Name | Player's State | Total Number of Points | Player's Pre-Rating | Average Pre-Chess Rating of Opponents
--------------|----------------|------------------------|---------------------|---------------------------------------
Gary Hua      | ON             | 6.0                    | 1794                | 1605

I will add another column named Player's ID. This is for internal purposes.

```{r}
library(stringr)

options(warn=-1) # Turning off warnings with reading the text file

textFile <- readLines("https://raw.githubusercontent.com/logicalschema/DATA607/master/Project%201/tournamentinfo.txt")
options(warn=0) # Turning warnings back on

head(textFile)

i <- 5  # Skipping the header rows and lines that have --------------------
while (i <= length(textFile)) {
  row1 <- unlist(strsplit(textFile[i], split='|', fixed=TRUE))
  row2 <- unlist(strsplit(textFile[i + 1],  split ='|', fixed=TRUE))
  

  
  i <- i + 3
}

#Get the player's id
playerID <- str_trim(row1[1])

#Get the player's name
playerName <- str_trim(row1[2])
print(playerName)

#Get the player's state
playerState <- str_trim(row2[1])
print(playerState)

#Get the player's total number of points
playertotalPoints <- as.numeric(str_trim(row1[3]))
print(playertotalPoints)

#Get the player's pre-rating
playerpreRating <- str_match(str_trim(row2[2]), "R:(.*?)->")[,2]    #Grab the text between R: and the ->
playerpreRating <- as.numeric(str_remove(str_trim(playerpreRating), 'P(.*)$')) #Remove non-numeric characters
print(playerpreRating)


```